<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guff Podcasts | Guest Invitation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #F5F1E8;
            overflow-x: hidden;
        }
        h1, h2, h3, .font-serif {
            font-family: 'Lora', serif;
        }
        .bg-rust { background-color: #B9472C; }
        .text-rust { color: #B9472C; }
        .bg-coral { background-color: #FF7043; }
        .text-coral { color: #FF7043; }
        
        /* Animated Background Pattern Overlay */
        @keyframes subtle-glow-move {
            0%, 100% { opacity: 0.03; transform: translate(0, 0) scale(1); }
            50% { opacity: 0.06; transform: translate(15px, 8px) scale(1.05); }
            100% { opacity: 0.03; transform: translate(0, 0) scale(1); }
        }
        @keyframes light-leak-enhanced {
             0% { background-position: -600px 0, -600px 0; opacity: 0.2; }
             50% { opacity: 0.5; }
             100% { background-position: 600px 0, 600px 0; opacity: 0.2; }
        }
         .pattern-overlay-dark {
            position: relative;
         }
         .pattern-overlay-dark::before {
            content: "";
            position: fixed; /* Make background fixed */
            inset: 0;
            background-image: url('https://raw.githubusercontent.com/Sarup098/artevia/main/pattern.png');
            background-size: 400px;
            background-position: center;
            background-repeat: repeat;
            opacity: 0.05; /* Brighter */
            z-index: -1;
            animation: subtle-glow-move 20s infinite ease-in-out;
        }
         .pattern-overlay-dark::after {
             content: "";
             position: fixed; /* Make background fixed */
             inset: 0;
             background:
                 radial-gradient(ellipse at top left, rgba(255, 215, 0, 0.3) 0%, transparent 60%),
                 radial-gradient(ellipse at bottom right, rgba(255, 112, 67, 0.3) 0%, transparent 60%);
             background-size: 500px 500px, 500px 500px;
             background-repeat: no-repeat;
             mix-blend-mode: screen;
             animation: light-leak-enhanced 12s infinite alternate ease-in-out;
             z-index: -1;
         }
         .content-z {
            position: relative;
            z-index: 2; /* Content stays on top */
         }
         
         /* Guff Logo Glow Animation */
        @keyframes logo-glow-subtle {
             0%, 100% { filter: drop-shadow(0 0 15px rgba(255, 112, 67, 0.15)) drop-shadow(0 0 20px rgba(255, 215, 0, 0.07)); }
             50% { filter: drop-shadow(0 0 20px rgba(255, 112, 67, 0.25)) drop-shadow(0 0 25px rgba(255, 215, 0, 0.12)); }
        }
        .guff-logo-glow {
            animation: logo-glow-subtle 4s infinite ease-in-out;
        }

        /* Blinking Cursor */
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        .blinking-cursor {
            animation: blink 1s step-end infinite;
            color: #FF7043; /* Coral cursor */
        }
    </style>
</head>
<body class="pattern-overlay-dark min-h-screen">

    <!-- Header -->
    <header class="bg-black/80 backdrop-blur-sm sticky top-0 z-50 shadow-md">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="index.html" class="flex-shrink-0">
                <img src="https://raw.githubusercontent.com/Sarup098/artevia/main/main%20logo.png" alt="Artevia Studio Logo" class="h-12 w-auto">
            </a>
            <div class="flex items-center gap-x-4">
                 <img src="https://raw.githubusercontent.com/Sarup098/artevia/main/guff.PNG" alt="Guff Podcasts" class="h-12 w-auto">
            </div>
        </div>
    </header>

    <!-- 
      DYNAMIC CONTENT AREA 
      This one file shows one of two sections based on the URL hash.
    -->
    <div class="container mx-auto max-w-2xl p-6 content-z">

        <!-- 
          SECTION 1: GUEST MEMENTO (Visible only if URL has a hash) 
        -->
        <section id="guest-display-section" class="hidden my-8"> <!-- Added margin -->
            <div class="bg-gray-900/70 backdrop-blur-md border border-white/20 rounded-lg shadow-xl p-8 md:p-12">
                
                <h1 class="text-3xl font-serif font-bold text-white text-center mb-6 h-10 flex items-center justify-center">
                    <span id="guest-title-text"></span><span class="blinking-cursor">|</span>
                </h1>
                
                <img src="https://raw.githubusercontent.com/Sarup098/artevia/main/guff.PNG" alt="Guff Logo" class="w-48 mx-auto mb-6 guff-logo-glow">
                
                <h2 class="text-3xl font-serif font-bold text-center text-white mb-6">
                    To: <span id="guest-name-display" class="text-coral">Guest Name</span>
                </h2>
                
                <p class="text-lg text-gray-200 leading-relaxed text-center mb-8">
                    We are incredibly excited and honored to host you for an honest conversation on Guff Podcasts. Your voice and your story are important to us, and we truly cannot wait to share this platform with you.
                </p>
                
                <div class="bg-black/30 border border-white/10 rounded-lg p-6 space-y-4 mb-8">
                    <div>
                        <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">Event</h3>
                        <p class="text-lg text-white font-medium">Guff Podcast Recording</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">Time & Date</h3>
                            <p class="text-lg text-white font-medium" id="time-display"></p>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">Venue</h3>
                            <p class="text-lg text-white font-medium" id="venue-display"></p>
                        </div>
                    </div>
                </div>

                <div>
                    <h2 class="text-2xl font-serif font-bold text-white mb-4">A Thought to Get Us Started...</h2>
                    <div class="border-l-4 border-rust pl-4">
                        <p class="text-xl text-gray-200 italic leading-relaxed" id="question-display"></p>
                    </div>
                </div>

                <!-- WhatsApp Contact Section -->
                <div class="mt-10 pt-6 border-t border-white/10 text-center">
                    <h3 class="text-lg font-semibold text-gray-200 mb-4">Have questions? Chat with the team.</h3>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <!-- Chat with Sarup -->
                        <a id="chat-sarup-btn" href="#" target="_blank" class="inline-flex items-center justify-center gap-x-2 bg-green-500 text-white font-bold py-2 px-5 rounded-full hover:bg-green-600 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.731 6.086l.003.004l-1.241 4.515 4.591-1.205z"/></svg>
                            Chat with Sarup
                        </a>
                        <!-- Chat with Karan -->
                        <a id="chat-karan-btn" href="#" target="_blank" class="inline-flex items-center justify-center gap-x-2 bg-green-500 text-white font-bold py-2 px-5 rounded-full hover:bg-green-600 transition-colors">
                           <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.731 6.086l.003.004l-1.241 4.515 4.591-1.205z"/></svg>
                            Chat with Karan
                        </a>
                    </div>
                </div>

                 <p class="text-center text-lg text-gray-200 mt-10">
                    See you soon!
                </p>
            </div>
        </section>

        <!-- 
          SECTION 2: ADMIN FORM (Visible by default) 
        -->
        <section id="admin-form-section" class="hidden my-8"> <!-- Added margin -->
            <div class="bg-gray-900/70 backdrop-blur-md border border-white/20 rounded-lg shadow-xl p-8 md:p-12">
                <h1 class="text-3xl font-serif font-bold text-white text-center mb-6 h-10 flex items-center justify-center">
                    <span id="admin-title-text"></span><span class="blinking-cursor">|</span>
                </h1>
                <form id="generate-link-form" class="space-y-6">
                    <div>
                        <label for="guest-name-input" class="block text-sm font-medium text-gray-300">Guest's Full Name</label>
                        <input type="text" id="guest-name-input" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-coral" required>
                    </div>
                     <div>
                        <label for="venue-input" class="block text-sm font-medium text-gray-300">Venue</label>
                        <input type="text" id="venue-input" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-coral" required>
                    </div>
                     <div>
                        <label for="time-input" class="block text-sm font-medium text-gray-300">Time & Date</label>
                        <input type="text" id="time-input" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-coral" placeholder="e.g., Sunday, Oct 26th @ 4:00 PM" required>
                    </div>
                     <div>
                        <label for="question-input" class="block text-sm font-medium text-gray-300">Tentative Question(s)</label>
                        <textarea id="question-input" rows="4" class="mt-1 block w-full bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-coral" placeholder="One or two questions to get them thinking..."></textarea>
                    </div>
                    <div>
                        <button type="submit" class="w-full bg-rust text-white font-bold py-3 px-6 rounded-lg hover:bg-coral transition-colors">Generate Shareable Link</button>
                    </div>
                </form>

                <!-- Generated Link Output -->
                <div id="link-output-section" class="hidden mt-8">
                     <label for="generated-link-output" class="block text-sm font-medium text-gray-300">Your Guest Link:</label>
                     <div class="mt-2 flex gap-2">
                        <input type="text" id="generated-link-output" readonly class="w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-gray-200">
                        <button id="copy-link-btn" class="bg-coral text-white font-semibold py-2 px-4 rounded-lg hover:bg-rust">Copy</button>
                     </div>
                     <p id="copy-feedback" class="text-green-400 text-sm mt-2 h-4"></p>
                </div>
            </div>
        </section>

    </div>

    <script type="module">
        const guestDisplay = document.getElementById('guest-display-section');
        const adminForm = document.getElementById('admin-form-section');
        const generateLinkForm = document.getElementById('generate-link-form');
        const linkOutputSection = document.getElementById('link-output-section');
        const generatedLinkOutput = document.getElementById('generated-link-output');
        const copyLinkBtn = document.getElementById('copy-link-btn');
        const copyFeedback = document.getElementById('copy-feedback');
        const chatSarupBtn = document.getElementById('chat-sarup-btn');
        const chatKaranBtn = document.getElementById('chat-karan-btn');

        // --- NEW: Robust Base64 Encoding/Decoding for Unicode ---
        function safeEncode(str) {
            try {
                return btoa(encodeURIComponent(str));
            } catch (e) {
                console.error("Failed to encode string:", e);
                return null;
            }
        }
        function safeDecode(base64) {
            try {
                return decodeURIComponent(atob(base64));
            } catch (e) {
                console.error("Failed to decode Base64 string:", e);
                return null;
            }
        }

        // --- NEW: Title Typing Animation Logic ---
        function typingAnimation(element) {
            if (!element) return; // Don't run if element doesn't exist

            const sequences = [
                // English sequence
                "G", "Gu", "Guf", "Guff",
                "Guff.", "Guff..", "Guff...",
                "Guff...", // Hold
                "Guff...", // Hold
                "Guff..", "Guff.", "Guff",
                "Guf", "Gu", "G",
                "", // Hold Empty
                // Nepali sequence
                "ग", "गफ",
                "गफ.", "गफ..", "गफ...",
                "गफ...", // Hold
                "गफ...", // Hold
                "गफ..", "गफ.", "गफ",
                "ग",
                "" // Hold Empty
            ];
            let frameIndex = 0;
            const typeSpeed = 100;
            const deleteSpeed = 80;
            const pauseEnd = 2500; // 2.5 seconds pause
            const pauseMid = 200;

            function type() {
                let currentFrame = sequences[frameIndex];
                element.textContent = currentFrame;

                let timeout;
                
                if (currentFrame.endsWith('...')) {
                    timeout = pauseEnd;
                } else if (frameIndex < sequences.length - 1 && sequences[frameIndex+1].length < currentFrame.length) {
                    timeout = deleteSpeed;
                } else if(currentFrame.length === 0) {
                    timeout = pauseMid;
                } else {
                    timeout = typeSpeed;
                }

                frameIndex = (frameIndex + 1) % sequences.length;
                setTimeout(type, timeout);
            }
            
            setTimeout(type, 500); // Initial start
        }

        // Check the URL on page load
        window.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.substring(1); 
            const adminTitle = document.getElementById('admin-title-text');
            const guestTitle = document.getElementById('guest-title-text');

            if (hash) {
                // We are in GUEST VIEW
                try {
                    const jsonString = safeDecode(hash); 
                    const data = JSON.parse(jsonString);

                    if (data.n && data.v && data.t) {
                        document.getElementById('guest-name-display').textContent = data.n;
                        document.getElementById('venue-display').textContent = data.v;
                        document.getElementById('time-display').textContent = data.t;
                        document.getElementById('question-display').textContent = data.q || "We're looking forward to our conversation!"; // Fallback
                        
                        // Set WhatsApp links
                        const whatsappMessage = encodeURIComponent(`Hello! This is ${data.n}. I have a question about my upcoming Guff Podcast recording.`);
                        chatSarupBtn.href = `https://wa.me/919907488075?text=${whatsappMessage}`;
                        chatKaranBtn.href = `https://wa.me/917029991661?text=${whatsappMessage}`; 
                        
                        guestDisplay.classList.remove('hidden');
                        typingAnimation(guestTitle); // Animate the guest title
                    } else {
                        adminForm.classList.remove('hidden');
                        typingAnimation(adminTitle); // Animate the admin title
                    }
                } catch (e) {
                    console.error("Invalid data in URL hash:", e);
                    adminForm.classList.remove('hidden');
                    typingAnimation(adminTitle); // Animate the admin title
                }
            } else {
                // We are in ADMIN VIEW
                adminForm.classList.remove('hidden');
                typingAnimation(adminTitle); // Animate the admin title
            }
        });

        // Handle the admin form submission
        generateLinkForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('guest-name-input').value;
            const venue = document.getElementById('venue-input').value;
            const time = document.getElementById('time-input').value;
            const question = document.getElementById('question-input').value;

            const data = {
                n: name,
                v: venue,
                t: time,
                q: question
            };

            const jsonString = JSON.stringify(data);
            const base64String = safeEncode(jsonString); // Use new safe function

            if (!base64String) {
                alert("Error generating link. Could not encode data.");
                return;
            }

            const baseLink = window.location.href.split('#')[0].split('?')[0];
            const finalLink = baseLink + '#' + base64String;

            generatedLinkOutput.value = finalLink;
            linkOutputSection.classList.remove('hidden');
            copyFeedback.textContent = '';
        });

        // Handle the copy button
        copyLinkBtn.addEventListener('click', () => {
            generatedLinkOutput.select();
            try {
                var successful = document.execCommand('copy');
                var msg = successful ? 'Copied to clipboard!' : 'Failed to copy.';
                copyFeedback.textContent = msg;
                if(successful) copyFeedback.style.color = '#4ade80'; // green
                else copyFeedback.style.color = '#f87171'; // red
            } catch (err) {
                copyFeedback.textContent = 'Failed to copy.';
                copyFeedback.style.color = '#f87171'; // red
            }
            window.getSelection().removeAllRanges();
        });

    </script>
</body>
</html>

